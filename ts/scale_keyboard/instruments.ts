const instrumentsDict_int: Map<number, string> = new Map<number, string>();
instrumentsDict_int.set(  1, 'Acoustic Grand Piano');
instrumentsDict_int.set(  2, 'Bright Acoustic Piano');
instrumentsDict_int.set(  3, 'Electric Grand Piano');
instrumentsDict_int.set(  4, 'HonkyTonk Piano');
//instrumentsDict_int.set(  5, 'Electric Piano 1');
//instrumentsDict_int.set(  6, 'Electric Piano 2');
//instrumentsDict_int.set(  7, 'Harpsichord');
//instrumentsDict_int.set(  8, 'Clavinet');

instrumentsDict_int.set(  9, 'Celesta');
instrumentsDict_int.set( 10, 'Glockenspiel');
instrumentsDict_int.set( 11, 'Music Box');
instrumentsDict_int.set( 12, 'Vibraphone');
instrumentsDict_int.set( 13, 'Marimba');
instrumentsDict_int.set( 14, 'Xylophone');
instrumentsDict_int.set( 15, 'Tubular Bells');
//instrumentsDict_int.set( 16, 'Dulcimer');

//instrumentsDict_int.set( 17, 'Drawbar Organ');
instrumentsDict_int.set( 18, 'Percussive Organ');
instrumentsDict_int.set( 19, 'Rock Organ');
instrumentsDict_int.set( 20, 'Church Organ');
instrumentsDict_int.set( 21, 'Reed Organ');
//instrumentsDict_int.set( 22, 'Accordion');
//instrumentsDict_int.set( 23, 'Harmonica');
instrumentsDict_int.set( 24, 'Tango Accordion');

//instrumentsDict_int.set( 25, 'Acoustic Guitar (Nylon)');
instrumentsDict_int.set( 26, 'Acoustic Guitar (Steel)');
//instrumentsDict_int.set( 27, 'Electric Guitar (Jazz)');
//instrumentsDict_int.set( 28, 'Electric Guitar (Clean)');
//instrumentsDict_int.set( 29, 'Electric Guitar (Muted)');
//instrumentsDict_int.set( 30, 'Overdriven Guitar');
//instrumentsDict_int.set( 31, 'Distortion Guitar');
//instrumentsDict_int.set( 32, 'Guitar Harmonics');

instrumentsDict_int.set( 33, 'Acoustic Bass');
//instrumentsDict_int.set( 34, 'Electric Bass (Finger)');
//instrumentsDict_int.set( 35, 'Electric Bass (Pick)');
//instrumentsDict_int.set( 36, 'Fretless Bass');
//instrumentsDict_int.set( 37, 'Slap Bass 1');
instrumentsDict_int.set( 38, 'Slap Bass 2');
//instrumentsDict_int.set( 39, 'Synth Bass 1');
//instrumentsDict_int.set( 40, 'Synth Bass 2');

//instrumentsDict_int.set( 41, 'Violin');
//instrumentsDict_int.set( 42, 'Viola');
//instrumentsDict_int.set( 43, 'Cello');
//instrumentsDict_int.set( 44, 'Contrabass');
instrumentsDict_int.set( 45, 'Tremolo Strings');
instrumentsDict_int.set( 46, 'Pizzicato Strings');
//instrumentsDict_int.set( 47, 'Orchestral Harp');
instrumentsDict_int.set( 48, 'Timpani');

//instrumentsDict_int.set( 49, 'String Ensemble 1');
//instrumentsDict_int.set( 50, 'String Ensemble 2');
instrumentsDict_int.set( 51, 'Synth Strings 1');
//instrumentsDict_int.set( 52, 'Synth Strings 2');
instrumentsDict_int.set( 53, 'Choir Aahs');
instrumentsDict_int.set( 54, 'Voice Oohs');
//instrumentsDict_int.set( 55, 'Synth Choir');
//instrumentsDict_int.set( 56, 'Orchestra Hit');

//instrumentsDict_int.set( 57, 'Trumpet');
//instrumentsDict_int.set( 58, 'Trombone');
//instrumentsDict_int.set( 59, 'Tuba');
//instrumentsDict_int.set( 60, 'Muted Trumpet');
//instrumentsDict_int.set( 61, 'French Horn');
//instrumentsDict_int.set( 62, 'Brass Section');
//instrumentsDict_int.set( 63, 'Synth Brass 1');
//instrumentsDict_int.set( 64, 'Synth Brass 2');

//instrumentsDict_int.set( 65, 'Soprano Sax');
//instrumentsDict_int.set( 66, 'Alto Sax');
//instrumentsDict_int.set( 67, 'Tenor Sax');
//instrumentsDict_int.set( 68, 'Baritone Sax');
//instrumentsDict_int.set( 69, 'Oboe');
//instrumentsDict_int.set( 70, 'English Horn');
//instrumentsDict_int.set( 71, 'Bassoon');
//instrumentsDict_int.set( 72, 'Clarinet');

//instrumentsDict_int.set( 73, 'Piccolo');
//instrumentsDict_int.set( 74, 'Flute');
//instrumentsDict_int.set( 75, 'Recorder');
//instrumentsDict_int.set( 76, 'Pan Flute');
//instrumentsDict_int.set( 77, 'Blown Bottle');
//instrumentsDict_int.set( 78, 'Shakuhachi');
//instrumentsDict_int.set( 79, 'Whistle');
//instrumentsDict_int.set( 80, 'Ocarina');

//instrumentsDict_int.set( 81, 'Lead 1 (Square)');
//instrumentsDict_int.set( 82, 'Lead 2 (Sawtooth)');
//instrumentsDict_int.set( 83, 'Lead 3 (Calliope)');
//instrumentsDict_int.set( 84, 'Lead 4 (Chiff)');
//instrumentsDict_int.set( 85, 'Lead 5 (Charang)');
//instrumentsDict_int.set( 86, 'Lead 6 (Voice)');
instrumentsDict_int.set( 87, 'Lead 7 (Fifths)');
//instrumentsDict_int.set( 88, 'Lead 8 (Bass + Lead)');

instrumentsDict_int.set( 89, 'Pad 1 (New age)');
instrumentsDict_int.set( 90, 'Pad 2 (Warm)');
//instrumentsDict_int.set( 91, 'Pad 3 (Polysynth)');
//instrumentsDict_int.set( 92, 'Pad 4 (Choir)');
instrumentsDict_int.set( 93, 'Pad 5 (Bowed)');
//instrumentsDict_int.set( 94, 'Pad 6 (Metallic)');
//instrumentsDict_int.set( 95, 'Pad 7 (Halo)');
instrumentsDict_int.set( 96, 'Pad 8 (Sweep)');

//instrumentsDict_int.set( 97, 'FX 1 (Rain)');
instrumentsDict_int.set( 98, 'FX 2 (Soundtrack)');
//instrumentsDict_int.set( 99, 'FX 3 (Crystal)');
//instrumentsDict_int.set(100, 'FX 4 (Atmosphere)');
instrumentsDict_int.set(101, 'FX 5 (Brightness)');
//instrumentsDict_int.set(102, 'FX 6 (Goblins)');
instrumentsDict_int.set(103, 'FX 7 (Echoes)');
//instrumentsDict_int.set(104, 'FX 8 (SciFi)');

//instrumentsDict_int.set(105, 'Sitar');
//instrumentsDict_int.set(106, 'Banjo');
//instrumentsDict_int.set(107, 'Shamisen');
instrumentsDict_int.set(108, 'Koto');
//instrumentsDict_int.set(109, 'Kalimba');
//instrumentsDict_int.set(110, 'Bagpipe');
//instrumentsDict_int.set(111, 'Fiddle');
//instrumentsDict_int.set(112, 'Shanai');

//instrumentsDict_int.set(113, 'Tinkle Bell');
//instrumentsDict_int.set(114, 'Agogo');
instrumentsDict_int.set(115, 'Steel Drums');
//instrumentsDict_int.set(116, 'Woodblock');
//instrumentsDict_int.set(117, 'Taiko Drum');
//instrumentsDict_int.set(118, 'Melodic Tom');
//instrumentsDict_int.set(119, 'Synth Drum');
//instrumentsDict_int.set(120, 'Reverse Cymbal');

//instrumentsDict_int.set(121, 'Guitar Fret Noise');
//instrumentsDict_int.set(122, 'Breath Noise');
//instrumentsDict_int.set(123, 'Seashore');
//instrumentsDict_int.set(124, 'Bird Tweet');
//instrumentsDict_int.set(125, 'Telephone Ring');
//instrumentsDict_int.set(126, 'Helicopter');
//instrumentsDict_int.set(127, 'Applause');
//instrumentsDict_int.set(128, 'Gunshot');


//const instrumentsDict_fr: Map<number, string> = new Map<number, string>();


//// global dictionary
//const instrumentsDicts: Map<string, Map<number, string>> = new Map<string,Map<number, string>>();
//instrumentsDicts.set("int", instrumentsDict_int);
//instrumentsDicts.set("fr" , instrumentsDict_fr);


const volumeRef = 80;
const instrumentsVolumesDict: Map<number, number> = new Map<number, number>();
for (let i = 1; i <= 128; i++)
    instrumentsVolumesDict.set(i, volumeRef*1.75); // default

instrumentsVolumesDict.set(  1, volumeRef*0.9);     // Acoustic Grand Piano
instrumentsVolumesDict.set( 19, volumeRef*2);       // Rock Organ
instrumentsVolumesDict.set( 21, volumeRef*1);       // Reed Organ
instrumentsVolumesDict.set( 46, volumeRef*3);       // Tremolo Strings
instrumentsVolumesDict.set( 87, volumeRef*2.6);     // Lead 7 (Fifths)
instrumentsVolumesDict.set( 98, volumeRef*3);       // FX 2 (Soundtrack)
instrumentsVolumesDict.set(108, volumeRef*0.8);     // Koto


function updateInstrumentSelector(id: string): void
{
    // get selected culture
    const lang = getSelectedCulture();

    // get instrument selector
    const instrSelect: HTMLSelectElement = <HTMLSelectElement>document.getElementById(id);
    const initialized: boolean = (instrSelect.options != null && instrSelect.options.length > 0);
    const instrDict : Map<number, string> = instrumentsDict_int; //<Map<number, string>>notesDicts.get(lang);

    //// if reset option set, remove all options
    //if (reset)
    //    while (instrSelect.firstChild)
    //        instrSelect.firstChild.remove();

    // fill selector
    if (!initialized /*|| reset*/)
    {

        for (const [key, value] of instrDict)
        {

            let option = document.createElement('option');
            option.value = key.toString();
            option.innerHTML = value;
            instrSelect.appendChild(option);
        }
    }
    else
    {
        // update
        let index = 0
        for (const [key, value] of instrDict)
        {
            instrSelect.options[index].innerHTML = value;
            index++;
        }
    }
}

function onInstrumentSelected(id: string)
{
    const instrSelect: HTMLSelectElement = <HTMLSelectElement>document.getElementById(id);
    const instrId: number = parseInt(instrSelect.value);

    // check if instrument is loaded
    const instrLoaded = (instrumentsLoaded.indexOf(instrId) >= 0);
    if (!instrLoaded)
        loadSelectedInstrument();
    else
    {
        // update current instrument and volume
        MIDI.channels[0].program = instrId - 1;
        volumePlay = <number>instrumentsVolumesDict.get(instrId);
    }
}